[{"C:\\Users\\Wing\\Documents\\Wing\\Web Development\\By Miles tech challenge\\client\\src\\index.js":"1","C:\\Users\\Wing\\Documents\\Wing\\Web Development\\By Miles tech challenge\\client\\src\\App.js":"2","C:\\Users\\Wing\\Documents\\Wing\\Web Development\\By Miles tech challenge\\client\\src\\reportWebVitals.js":"3","C:\\Users\\Wing\\Documents\\Wing\\Web Development\\By Miles tech challenge\\client\\src\\pages\\pol-details\\pol-details.page.jsx":"4","C:\\Users\\Wing\\Documents\\Wing\\Web Development\\By Miles tech challenge\\client\\src\\components\\protected-route\\protected-route.component.jsx":"5","C:\\Users\\Wing\\Documents\\Wing\\Web Development\\By Miles tech challenge\\client\\src\\pages\\loading\\loading-page.jsx":"6","C:\\Users\\Wing\\Documents\\Wing\\Web Development\\By Miles tech challenge\\client\\src\\components\\pol-details\\pol-details.component.jsx":"7","C:\\Users\\Wing\\Documents\\Wing\\Web Development\\By Miles tech challenge\\client\\src\\components\\driver-details\\driver-details.component.jsx":"8"},{"size":645,"mtime":1610896790871,"results":"9","hashOfConfig":"10"},{"size":3496,"mtime":1610896979150,"results":"11","hashOfConfig":"10"},{"size":362,"mtime":499162500000,"results":"12","hashOfConfig":"10"},{"size":1976,"mtime":1610897108748,"results":"13","hashOfConfig":"10"},{"size":618,"mtime":1610809928142,"results":"14","hashOfConfig":"10"},{"size":398,"mtime":1610877454952,"results":"15","hashOfConfig":"10"},{"size":7003,"mtime":1610876712242,"results":"16","hashOfConfig":"10"},{"size":2339,"mtime":1610876420933,"results":"17","hashOfConfig":"10"},{"filePath":"18","messages":"19","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"20"},"6hmb5s",{"filePath":"21","messages":"22","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"23","usedDeprecatedRules":"20"},{"filePath":"24","messages":"25","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"20"},{"filePath":"26","messages":"27","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"20"},{"filePath":"28","messages":"29","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"20"},{"filePath":"30","messages":"31","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"20"},{"filePath":"32","messages":"33","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"20"},{"filePath":"34","messages":"35","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},"C:\\Users\\Wing\\Documents\\Wing\\Web Development\\By Miles tech challenge\\client\\src\\index.js",[],["37","38"],"C:\\Users\\Wing\\Documents\\Wing\\Web Development\\By Miles tech challenge\\client\\src\\App.js",["39"],"import React, { useState, useEffect } from 'react';\nimport { Switch, Route, useHistory } from 'react-router-dom';\n\nimport PolDetailsPage from './pages/pol-details/pol-details.page';\nimport ProtectedRoute from './components/protected-route/protected-route.component'; //Use custom component to protect the policy details route so that use must authenticate to be able to navigate there\n\nimport './App.css';\n\nconst App = () => {\n\n  const history = useHistory();\n  \n  const [{ username, password }, setCredentials] = useState({ username: '', password: ''})\n  const [accessToken, setAccessToken] = useState();\n  const [userAuthenticated, setUserAuthenticated] = useState(false)\n \n  // Adding in use effect to monitor for when access token gets saved to state from the handleSubmit function. Once token is available, can then re-direct to policy-details route\n  useEffect(() => {\n    if (accessToken) {\n         //Directs to /policy-details route and passes the access token for grabbing the policy details\n \n         history.push({\n           pathname: '/policy-details',\n           accessToken\n         })\n    }\n  }, [accessToken])\n\n  const handleChange = (e) => {\n    e.preventDefault()\n\n    const { name, value } = e.target;\n\n    setCredentials(prevState => ({ ...prevState, [name]: value }));\n  }\n\n  const handleSubmit = async(e) => {\n    e.preventDefault();\n\n    const info = {\n      username,\n      password,\n      type: 'USER_PASSWORD_AUTH'\n    }\n\n    try {\n\n      //Call API to get access token\n      const req = await fetch(`https://api.bybits.co.uk/auth/token`, {\n        method: 'POST',\n        body: JSON.stringify(info),\n        headers: {\n          'environment': 'mock',\n          'Content-Type': 'application/json'\n        } \n      });\n\n      const data = await req.json();\n\n      // Push access token to state\n      setAccessToken(data.access_token);\n    \n      //Set user authenticated to be true so policy details page displays\n      setUserAuthenticated(true);\n    } catch (err) {\n      console.log(err);\n    }\n  }\n\n  return (\n    \n    <div className='App container-fluid'>\n      <Switch>\n          <ProtectedRoute exact path='/policy-details' component={PolDetailsPage} userAuthenticated={userAuthenticated} setUserAuthenticated={setUserAuthenticated} /> \n          <Route exact path = '/'>\n            <div className='login-wrap container'>\n              <div className='row align-items-center'>\n                <div className='col-sm-6 picture'></div>\n                <div className='col-sm-6'>\n                  <div className='login-title mt-5 mb-5'>Log In</div>\n                  <form className='login-form' onSubmit={handleSubmit}>\n                    <input className='username form-control mt-4 mb-4' name='username' type='text' value={username} placeholder='Your Username' onChange={handleChange} required />\n                    <input className='password form-control mt-4 mb-4' name='password' type='password' value={password} placeholder='Your Password' onChange={handleChange} required />\n                    {!username || !password ? \n                    <button className='btn btn-light float-right mt-3' disabled>Log in</button>\n                    :\n                    <button type='submit' className='btn btn-outline-info float-right mt-3'>Log in</button>\n                    }\n                  </form>\n                </div>\n              </div>\n              \n            </div>\n          </Route>\n      </Switch>   \n    </div>\n  );\n}\n\nexport default App;\n","C:\\Users\\Wing\\Documents\\Wing\\Web Development\\By Miles tech challenge\\client\\src\\reportWebVitals.js",[],"C:\\Users\\Wing\\Documents\\Wing\\Web Development\\By Miles tech challenge\\client\\src\\pages\\pol-details\\pol-details.page.jsx",[],"C:\\Users\\Wing\\Documents\\Wing\\Web Development\\By Miles tech challenge\\client\\src\\components\\protected-route\\protected-route.component.jsx",[],"C:\\Users\\Wing\\Documents\\Wing\\Web Development\\By Miles tech challenge\\client\\src\\pages\\loading\\loading-page.jsx",[],"C:\\Users\\Wing\\Documents\\Wing\\Web Development\\By Miles tech challenge\\client\\src\\components\\pol-details\\pol-details.component.jsx",[],"C:\\Users\\Wing\\Documents\\Wing\\Web Development\\By Miles tech challenge\\client\\src\\components\\driver-details\\driver-details.component.jsx",[],["40","41"],{"ruleId":"42","replacedBy":"43"},{"ruleId":"44","replacedBy":"45"},{"ruleId":"46","severity":1,"message":"47","line":27,"column":6,"nodeType":"48","endLine":27,"endColumn":19,"suggestions":"49"},{"ruleId":"42","replacedBy":"50"},{"ruleId":"44","replacedBy":"51"},"no-native-reassign",["52"],"no-negated-in-lhs",["53"],"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'history'. Either include it or remove the dependency array.","ArrayExpression",["54"],["52"],["53"],"no-global-assign","no-unsafe-negation",{"desc":"55","fix":"56"},"Update the dependencies array to be: [accessToken, history]",{"range":"57","text":"58"},[1114,1127],"[accessToken, history]"]